{{!
    This file is part of Moodle - https://moodle.org/

    Template for conversation detail view (tree).
}}
<div class="conversation-detail h-100 d-flex flex-column">
    <div class="detail-header mb-3 pb-2 border-bottom d-flex align-items-center">
        <button type="button" class="btn btn-sm btn-outline-secondary back-to-list-btn mr-2" data-pageid="{{pageid}}" title="{{#str}}backtolist, mod_harpiasurvey{{/str}}">
            <i class="fa fa-arrow-left mr-1"></i>
            <span class="d-none d-sm-inline">{{#str}}back, moodle{{/str}}</span>
        </button>
        <div class="flex-grow-1">
            <h6 class="mb-0 font-weight-bold text-primary">
                <i class="fa fa-comments mr-1" aria-hidden="true"></i>
                {{#str}}conversation, mod_harpiasurvey{{/str}} {{conversation_number}}
            </h6>
            <small class="text-muted d-block">{{#str}}conversationtree, mod_harpiasurvey{{/str}}</small>
            <small class="text-muted d-flex align-items-center mt-1">
                <i class="fa fa-code-branch text-success mr-1" aria-hidden="true"></i>
                <span>Click "Branch" on any turn to fork a new path from that point.</span>
            </small>
        </div>
    </div>
    
    <div class="detail-tree flex-grow-1" style="overflow-y: auto; min-height: 0;">
        {{#root_node}}
            {{> mod_harpiasurvey/tree_node }}
        {{/root_node}}
        {{#direct_branches}}
            {{> mod_harpiasurvey/tree_node }}
        {{/direct_branches}}
    </div>
    {{#root_node.can_create_branch}}
    <div class="detail-footer mt-2 pt-2 border-top">
        <button type="button" class="btn btn-sm btn-success btn-block create-direct-branch-btn" data-pageid="{{pageid}}" data-cmid="{{cmid}}" data-root-turn-id="{{root_turn_id}}">
            <i class="fa fa-code-branch" aria-hidden="true"></i> {{#str}}createdirectbranch, mod_harpiasurvey{{/str}}
        </button>
    </div>
    {{/root_node.can_create_branch}}
</div>
