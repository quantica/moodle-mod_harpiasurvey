define("mod_harpiasurvey/navigation_control",["exports","core/str","jquery"],(function(_exports,_str,_jquery){var obj;
/**
   * Navigation control module for harpiasurvey.
   *
   * @module     mod_harpiasurvey/navigation_control
   * @copyright  2025 Your Name
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_jquery=(obj=_jquery)&&obj.__esModule?obj:{default:obj};let initialized=!1;const areAllQuestionsAnswered=()=>{let allAnswered=!0;const unansweredQuestions=[];return(0,_jquery.default)(".question-item").each((function(){const questionItem=(0,_jquery.default)(this),questionType=questionItem.data("questiontype");if("aiconversation"===questionType)return;let hasAnswer=!1;if("singlechoice"===questionType||"likert"===questionType){hasAnswer=questionItem.find('input[type="radio"]:checked').length>0}else if("multiplechoice"===questionType){hasAnswer=questionItem.find('input[type="checkbox"]:checked').length>0}else if("select"===questionType){const select=questionItem.find("select");hasAnswer=select.val()&&""!==select.val()}else if("number"===questionType){const value=questionItem.find('input[type="number"]').val();hasAnswer=""!==value&&null!=value}else if("shorttext"===questionType){const input=questionItem.find('input[type="text"]');hasAnswer=input.val()&&""!==input.val().trim()}else if("longtext"===questionType){const textarea=questionItem.find("textarea");hasAnswer=textarea.val()&&""!==textarea.val().trim()}if(!hasAnswer){allAnswered=!1;const questionName=questionItem.find("h5").text()||"Question";unansweredQuestions.push(questionName)}})),{allAnswered:allAnswered,unansweredQuestions:unansweredQuestions}};_exports.init=function(){let canmanage=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(initialized)return;if(canmanage)return void(initialized=!0);const navElement=(0,_jquery.default)("nav[data-navigation-mode]"),navigationMode=navElement.data("navigation-mode"),canManageNav=!0===navElement.data("canmanage")||1===navElement.data("canmanage");canManageNav?initialized=!0:"only_forward"===navigationMode?((0,_jquery.default)(document).on("click",".navigation-next-link",(function(e){e.preventDefault();const link=(0,_jquery.default)(this);link.data("pageid");if(!areAllQuestionsAnswered().allAnswered)return(0,_str.get_string)("questionsmustbeanswered","mod_harpiasurvey").then((message=>{alert(message)})),!1;window.location.href=link.attr("href")})),(0,_jquery.default)(document).on("click",".pages-tabs .page-tab-link",(function(e){const navBar=(0,_jquery.default)(".pages-navigation-bar[data-navigation-mode]");if(!0===navBar.data("canmanage")||1===navBar.data("canmanage"))return;if("only_forward"!==navBar.data("navigation-mode"))return;const pageid=(0,_jquery.default)(this).data("pageid"),currentPageId=(0,_jquery.default)(".pages-tabs .page-tab-link.active").data("pageid");let clickedIndex=-1,currentIndex=-1;if((0,_jquery.default)(".pages-tabs .page-tab-link").each((function(index){const tabPageId=(0,_jquery.default)(this).data("pageid");tabPageId==pageid&&(clickedIndex=index),tabPageId==currentPageId&&(currentIndex=index)})),clickedIndex>=0&&currentIndex>=0&&clickedIndex<currentIndex)return e.preventDefault(),!1;if(clickedIndex>=0&&currentIndex>=0&&clickedIndex>currentIndex){if(!areAllQuestionsAnswered().allAnswered)return e.preventDefault(),(0,_str.get_string)("questionsmustbeanswered","mod_harpiasurvey").then((message=>{alert(message)})),!1}})),(0,_jquery.default)(document).on("click",".pagination .page-item.disabled .page-link",(function(e){return e.preventDefault(),!1})),initialized=!0):initialized=!0}}));

//# sourceMappingURL=navigation_control.min.js.map