{"version":3,"file":"ai_conversation.min.js","sources":["../src/ai_conversation.js"],"sourcesContent":["// Entry point that initializes per-behavior modules.\n// Use conditional loading to avoid loading turns.js (and fancytree) for continuous mode\nimport $ from 'jquery';\n\nexport const init = () => {\n    // Check for multi-model containers first (they have different class)\n    // Check for multi-model turns mode\n    const multiModelTurnsContainers = $('.multi-model-chat-container[data-behavior=\"turns\"]');\n    if (multiModelTurnsContainers.length > 0) {\n        // Use require to conditionally load multi_model_turns (AMD style)\n        // eslint-disable-next-line no-undef\n        require(['mod_harpiasurvey/multi_model_turns'], (module) => {\n            module.init();\n        });\n        return; // Early return to avoid checking other containers\n    }\n\n    // Check for multi-model Q&A mode\n    const multiModelQaContainers = $('.multi-model-chat-container[data-behavior=\"qa\"]');\n    if (multiModelQaContainers.length > 0) {\n        // eslint-disable-next-line no-undef\n        require(['mod_harpiasurvey/multi_model_qa'], (module) => {\n            module.init();\n        });\n        return; // Early return to avoid checking other containers\n    }\n    \n    // Check for multi-model continuous mode\n    const multiModelContainers = $('.multi-model-chat-container[data-behavior=\"continuous\"]');\n    if (multiModelContainers.length > 0) {\n        // Use require to conditionally load multi_model_continuous (AMD style)\n        // eslint-disable-next-line no-undef\n        require(['mod_harpiasurvey/multi_model_continuous'], (module) => {\n            module.init();\n        });\n        return; // Early return to avoid checking other containers\n    }\n\n    // Then check for regular containers\n    const containers = $('.ai-conversation-container');\n    if (containers.length === 0) {\n        return;\n    }\n    const hasTurns = containers.filter('[data-behavior=\"turns\"]').length > 0;\n    const hasContinuous = containers.filter('[data-behavior=\"continuous\"]').length > 0;\n    const hasQa = containers.filter('[data-behavior=\"qa\"]').length > 0;\n    \n    // Only load turns if needed (turns mode uses fancytree)\n    if (hasTurns) {\n        // eslint-disable-next-line no-undef\n        require(['mod_harpiasurvey/turns'], (module) => {\n            module.init();\n        });\n    }\n    \n    // Only load continuous if needed (continuous mode uses simple list, no fancytree)\n    if (hasContinuous) {\n        // eslint-disable-next-line no-undef\n        require(['mod_harpiasurvey/continuous'], (module) => {\n            module.init();\n        });\n    }\n\n    if (hasQa) {\n        // eslint-disable-next-line no-undef\n        require(['mod_harpiasurvey/qa'], (module) => {\n            module.init();\n        });\n    }\n};\n\n// Export functions for direct access if needed (e.g., for testing)\nexport const initTurns = () => {\n    return new Promise((resolve) => {\n        // eslint-disable-next-line no-undef\n        require(['mod_harpiasurvey/turns'], (module) => {\n            module.init();\n            resolve();\n        });\n    });\n};\n\nexport const initContinuous = () => {\n    return new Promise((resolve) => {\n        // eslint-disable-next-line no-undef\n        require(['mod_harpiasurvey/continuous'], (module) => {\n            module.init();\n            resolve();\n        });\n    });\n};\n\nexport const initMultiModelContinuous = () => {\n    return new Promise((resolve) => {\n        // eslint-disable-next-line no-undef\n        require(['mod_harpiasurvey/multi_model_continuous'], (module) => {\n            module.init();\n            resolve();\n        });\n    });\n};\n\nexport const initMultiModelTurns = () => {\n    return new Promise((resolve) => {\n        // eslint-disable-next-line no-undef\n        require(['mod_harpiasurvey/multi_model_turns'], (module) => {\n            module.init();\n            resolve();\n        });\n    });\n};\n\nexport const initMultiModelQa = () => {\n    return new Promise((resolve) => {\n        // eslint-disable-next-line no-undef\n        require(['mod_harpiasurvey/multi_model_qa'], (module) => {\n            module.init();\n            resolve();\n        });\n    });\n};\n"],"names":["length","require","module","init","containers","hasTurns","filter","hasContinuous","hasQa","Promise","resolve"],"mappings":"0XAIoB,SAGkB,mBAAE,sDACNA,OAAS,cAGnCC,QAAQ,CAAC,uCAAwCC,SAC7CA,OAAOC,cAMgB,mBAAE,mDACNH,OAAS,cAEhCC,QAAQ,CAAC,oCAAqCC,SAC1CA,OAAOC,cAMc,mBAAE,2DACNH,OAAS,cAG9BC,QAAQ,CAAC,4CAA6CC,SAClDA,OAAOC,gBAMTC,YAAa,mBAAE,iCACK,IAAtBA,WAAWJ,oBAGTK,SAAWD,WAAWE,OAAO,2BAA2BN,OAAS,EACjEO,cAAgBH,WAAWE,OAAO,gCAAgCN,OAAS,EAC3EQ,MAAQJ,WAAWE,OAAO,wBAAwBN,OAAS,EAG7DK,UAEAJ,QAAQ,CAAC,2BAA4BC,SACjCA,OAAOC,UAKXI,eAEAN,QAAQ,CAAC,gCAAiCC,SACtCA,OAAOC,UAIXK,OAEAP,QAAQ,CAAC,wBAAyBC,SAC9BA,OAAOC,8BAMM,IACd,IAAIM,SAASC,UAEhBT,QAAQ,CAAC,2BAA4BC,SACjCA,OAAOC,OACPO,wCAKkB,IACnB,IAAID,SAASC,UAEhBT,QAAQ,CAAC,gCAAiCC,SACtCA,OAAOC,OACPO,kDAK4B,IAC7B,IAAID,SAASC,UAEhBT,QAAQ,CAAC,4CAA6CC,SAClDA,OAAOC,OACPO,6CAKuB,IACxB,IAAID,SAASC,UAEhBT,QAAQ,CAAC,uCAAwCC,SAC7CA,OAAOC,OACPO,0CAKoB,IACrB,IAAID,SAASC,UAEhBT,QAAQ,CAAC,oCAAqCC,SAC1CA,OAAOC,OACPO"}